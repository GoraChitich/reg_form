(this.webpackJsonpreg_form=this.webpackJsonpreg_form||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"emailjs":{"service_id":"service_ekyvguk","user_id":"user_xlCrMdFfdIceV8ODHixvy","templateAdd_id":"template_9ymcj28","templateUpdate_id":"template_ocwll5c","from_name":"smolbars@gmail.com"},"site":{"host":"https://gorachitich.github.io/reg_form"},"sheet":"https://sheet.best/api/sheets/9789324f-9b9f-40c2-85d2-30e3de0fa441"}')},133:function(e,t,n){},194:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n(32),s=n.n(r),i=(n(97),n(18)),c=n(19),o=n(48),l=n(47),d=(n(98),n(92)),u=n(29),h=(n(99),n(36)),b=n.n(h),m=n(37),j=n(41),p=n.n(j);n(130),n(131);function O(){return"".concat(Math.floor(1e4*Math.random()),"-").concat(Date.now(),"-").concat(Math.floor(1e4*Math.random()))}function f(e){return new Date(Number(e.substr(0,4)),Number(e.substr(5,2))-1,e.substr(8,2))}var x=function(){function e(t){Object(i.a)(this,e),t?(this.firstname=t.firstname,this.lastname=t.lastname,this.email=t.email,this.phone=t.phone,this.birthdate=f(t.birthDate),this.isVisible="???",this.id=t.idRow):(this.firstname="",this.lastname="",this.email="",this.phone="",this.birthdate="",this.isVisible="",this.id=O())}return Object(c.a)(e,[{key:"createRecord",value:function(e,t,n,a,r,s){return this.firstname=e,this.lastname=t,this.email=n,this.phone=a,this.birthdate=r,this.visible=s,this.id=O(),this}}]),e}(),v=n(38),g=n.n(v),y=n(62),w=n(63),k=n.n(w),C=n(12),_=function(){function e(){Object(i.a)(this,e),this.url=C.sheet}return Object(c.a)(e,[{key:"getRecords",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(this.url,"/idOrder/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertRecord",value:function(e,t,n,a,r,s,i){switch(t){case 1:var c={method:"POST",headers:{"content-type":"application/json"},data:[{number:n,firstname:e.firstname,lastname:e.lastname,phone:e.phone,email:e.email,"birt\u0440Date":k()(e.birthdate,"yyyy-mm-dd"),idRow:e.id,idOrder:a,emailOwner:r,actualDate:k()(s,"yyyy-mm-dd"),actualTime:i}],url:this.url};b()(c).then((function(e){console.log("the data was added in the table ",e.data)})).catch((function(e){console.log("no data sorry ",e)}))}}},{key:"deleteRecord",value:function(){var e=Object(y.a)(g.a.mark((function e(t,n){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=1===e.t0?3:6;break;case 3:return e.next=5,b.a.delete("".concat(this.url,"/idOrder/").concat(t));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),D=n(20),S=(n(133),n(4));function N(e){var t=Object(a.useState)(e.record.firstname),n=Object(D.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(e.record.lastname),c=Object(D.a)(i,2),o=c[0],l=c[1],d=Object(a.useState)(e.record.email),u=Object(D.a)(d,2),h=u[0],b=u[1],m=Object(a.useState)(e.record.phone),j=Object(D.a)(m,2),O=j[0],f=j[1],x=Object(a.useState)(e.record.birthdate),v=Object(D.a)(x,2),g=v[0],y=v[1];return Object(a.useEffect)((function(){e.funcCallBack({firstname:r,lastname:o,email:h,phone:O,birthdate:g,isVisible:e.record.isVisible,id:e.record.id})})),Object(S.jsxs)("div",{className:"strtable-c",children:[Object(S.jsxs)("div",{className:"input-div1",children:[Object(S.jsxs)("label",{className:"label1",htmlFor:"firstname{index}",children:["Vorname ",Object(S.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(S.jsx)("input",{type:"text",name:"firstname{index}",id:"firstname{index}",className:"input1",value:r,onChange:function(e){return s(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"input-div2",children:[Object(S.jsxs)("label",{className:"label2",htmlFor:"lastname1",children:["Name ",Object(S.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(S.jsx)("input",{type:"email",name:"lastname{index}",id:"lastname{index}",className:"input1",value:o,onChange:function(e){return l(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"input-div3",children:[Object(S.jsxs)("label",{className:"label3",htmlFor:"email1",children:["Email ",Object(S.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(S.jsx)("input",{type:"text",name:"email{index}",id:"email{index}",className:"input1",value:h,onChange:function(e){return b(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"input-div4",children:[Object(S.jsxs)("label",{className:"label4",htmlFor:"phone{index}",children:["Telefon",Object(S.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(S.jsx)("input",{type:"text",name:"phone{index}",id:"phone{index}",className:"input1",value:O,onChange:function(e){return f(e.target.value)},required:!0})]}),Object(S.jsxs)("div",{className:"input-div5",children:[Object(S.jsxs)("label",{className:"label5",htmlFor:"birthdate{index}",children:["Geburtsdatum",Object(S.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(S.jsx)(p.a,{name:"birthdate{index}",id:"birthdate{index}",selected:g,onChange:function(e){return y(e)},required:!0,dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(S.jsx)("div",{className:"title",children:Object(S.jsx)("button",{onClick:e.deleteRecord,disabled:1===e.count,children:"L\xf6schen"})})]})}n(194);var T=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).propsID=e.id;e.update;return a.propsID?a.state={idOrder:e.id,records:[],googleTab:[],isTableFilled:!1,isUpdate:!0,maxCountOfPersons:50,regButton:!1,regButtonCaption:"\xc4ndern"}:a.state={actualPersonNumber:1,persons:[],records:[new x],redirect:!1,googleTab:[],isTableFilled:!1,isUpdate:!1,actualDate:new Date,actualTime:"10-00",maxCountOfPersons:50,regButton:!1,regButtonCaption:"Anmelden",idOrder:O()},a.changeOfPersons=a.changeOfPersons.bind(Object(u.a)(a)),a.presetRegistryButton=a.presetRegistryButton.bind(Object(u.a)(a)),a.submitHandler=a.submitHandler.bind(Object(u.a)(a)),a.tableChangeServiceView=new _,a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.id&&(new _).getRecords(this.props.id).then((function(t){var n=t.data.map((function(e){return new x(e)}));e.setState({records:n,regEmail:t.data[0].emailOwner,idOrder:t.data[0].idOrder,actualDate:f(t.data[0].actualDate),actualTime:t.data[0].actualTime})})).catch((function(e){return console.error(e)}))}},{key:"changeOfPersons",value:function(e){}},{key:"presetRegistryButton",value:function(){!this.state.isUpdate&&this.state.googleTab.length<this.state.maxCountOfPersons&&(this.state.regButton=!1)}},{key:"submitHandler",value:function(e){e.preventDefault(),this.propsID?this.submitHandlerUpdate():this.submitHandlerAdd()}},{key:"submitHandlerUpdate",value:function(){var e=this;this.tableChangeServiceView.deleteRecord(this.state.idOrder,1).then((function(t){return e.state.records.forEach((function(t,n){return e.tableChangeServiceView.insertRecord(t,1,n+1,e.state.idOrder,e.state.regEmail,e.state.actualDate,e.state.actualTime)}))})),this.state.records.forEach((function(e,t){m.init(C.emailjs.user_id);var n={from_name:C.emailjs.from_name,to_name:e.email};m.send(C.emailjs.service_id,C.emailjs.templateUpdate_id,n).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)}))})),this.setState({redirect:!0})}},{key:"submitHandlerAdd",value:function(){var e=this;this.state.records.forEach((function(t,n){return e.tableChangeServiceView.insertRecord(t,1,n+1,e.state.idOrder,e.state.regEmail,e.state.actualDate,e.state.actualTime)})),this.state.records.forEach((function(t,n){m.init(C.emailjs.user_id);var a={from_name:C.emailjs.from_name,to_name:t.email,link_delete:"".concat(C.site.host,"#/delete/").concat(e.state.idOrder),link_update:"".concat(C.site.host,"#/update/").concat(e.state.idOrder)};m.send(C.emailjs.service_id,C.emailjs.templateAdd_id,a).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)}))})),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return Object(S.jsxs)("table",{children:[Object(S.jsx)("tbody",{children:this.state.googleTab.map((function(e,t){return Object(S.jsxs)("tr",{children:[Object(S.jsx)("td",{children:e[1].number}),Object(S.jsx)("td",{children:e[1].firstname}),Object(S.jsx)("td",{children:e[1].lastname})]},t)}))}),Object(S.jsx)("button",{onClick:function(){return e.delAppointment()},children:"Termin stornieren"})]});var t=this.state.records.map((function(t,n){return Object(S.jsx)(N,{record:t,index:n,count:e.state.records.length,funcCallBack:function(t){e.state.records[n]=t},deleteRecord:function(){console.log(e.state.records);var t=Object(d.a)(e.state.records);t.splice(n,1),console.log(t),e.setState({records:t})}})}));return Object(S.jsxs)("form",{className:"regForm",onSubmit:this.submitHandler,children:[Object(S.jsxs)("div",{class:"sector",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("label",{children:" Termin der Lithurigie oder Dienst"}),Object(S.jsx)(p.a,{selected:this.state.actualDate,onSelect:function(t){return e.setState({actualDate:t})},dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(S.jsx)("div",{children:Object(S.jsx)("label",{children:"Typ der Anbetung:"})}),Object(S.jsxs)("label",{children:[Object(S.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"1",onChange:function(){return e.setState({actualTime:"10-00"})},checked:"10-00"===this.state.actualTime}),"Morgen (um 10.00)"]}),Object(S.jsx)("br",{}),Object(S.jsxs)("label",{children:[Object(S.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"2",onChange:function(){return e.setState({actualTime:"18-00"})},checked:"18-00"===this.state.actualTime}),"Abend (um 18.00)"]}),Object(S.jsx)("br",{}),Object(S.jsx)("div",{children:Object(S.jsxs)("label",{children:["Anzahl der Personen: ",Object(S.jsxs)("b",{children:[" ",this.state.records.length]})]})}),Object(S.jsx)("button",{onClick:function(){e.setState({records:e.state.records.concat(new x)})},children:"Eine Persone hinzuf\xfcgen"})]}),Object(S.jsx)("br",{}),t,Object(S.jsx)("button",{type:"submit",children:this.state.regButtonCaption})]})}}]),n}(a.Component),M=n(6);function R(){var e=Object(M.e)().hash.replace("#/update/","");return Object(S.jsx)(T,{id:e})}var F=n(39);function B(e){var t=Object(a.useState)(!1),n=Object(D.a)(t,2),r=n[0],s=n[1],i=Object(M.e)().hash.replace("#/delete/","");return Object(a.useEffect)((function(){(new _).deleteRecord(i,1).then(s(!0))}),[]),r?Object(S.jsx)("div",{children:"Sehr geehrte Damen und Herren, den Termin war wegen Ihre Bitte gel\xf6scht!"}):Object(S.jsx)("div",{children:"........."})}var E=function(e){Object(o.a)(n,e);var t=Object(l.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(F.b,{basename:"/reg_form",children:Object(S.jsxs)(M.b,{children:[Object(S.jsx)(F.a,{path:"/",exact:!0,children:Object(S.jsx)(T,{})}),Object(S.jsx)(F.a,{path:"/update/:id",exact:!0,children:Object(S.jsx)(R,{})}),Object(S.jsx)(F.a,{path:"/delete/:id",exact:!0,children:Object(S.jsx)(B,{})})]})})})}}]),n}(a.Component),P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,202)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),a(e),r(e),s(e),i(e)}))};s.a.render(Object(S.jsx)(E,{}),document.getElementById("root")),P()},97:function(e,t,n){},98:function(e,t,n){}},[[197,1,2]]]);
//# sourceMappingURL=main.ead57227.chunk.js.map