(this.webpackJsonpreg_form=this.webpackJsonpreg_form||[]).push([[0],{128:function(e,t,n){},189:function(e,t,n){},192:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n(34),r=n.n(s),i=(n(95),n(15)),c=n(16),l=n(29),o=n(28),d=(n(63),n(90)),h=n(9),u=n(85),b=n.n(u),m=n(30),j=n.n(m),p=n(38),g=n(40),f=n.n(g),O=(n(126),n(127),function(){function e(t){Object(i.a)(this,e),this.firstname="",this.lastname="",this.email="",this.phone="",this.birthdate="",this.isVisible=""}return Object(c.a)(e,[{key:"createRecord",value:function(e,t,n,a,s,r){return this.firstname=e,this.lastname=t,this.email=n,this.phone=a,this.birthdate=s,this.visible=r,this}}]),e}()),x=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"insertRecord",value:function(e,t){switch(t){case 1:var n={method:"POST",headers:{"content-type":"application/json"},data:[{number:e.number,firstname:e.firstname,lastname:e.lastname,phone:e.phone,email:e.email}],url:"https://sheet.best/api/sheets/9789324f-9b9f-40c2-85d2-30e3de0fa441"};j()(n).then((function(e){console.log("the data was added in the table ",e.data)})).catch((function(e){console.log("no data sorry ",e)}))}}},{key:"deleteRecord",value:function(e,t){switch(t){case 1:j.a.delete("https://sheet.best/api/sheets/9789324f-9b9f-40c2-85d2-30e3de0fa441/number/"+e).then((function(e){console.log("the appointment was canceled")}))}}},{key:"updateRecord",value:function(e,t){var n=this;switch(t){case 1:var a="https://sheet.best/api/sheets/9789324f-9b9f-40c2-85d2-30e3de0fa441/"+this.state.numberUpdate-1,s={method:"PATCH",headers:{accept:"application/json","content-type":"application/json"},data:[{number:e.numberUpdate,firstname:e.firstname,lastname:e.lastname,phone:e.phone,email:e.email,birhtDate:e.birhtDate}],url:a};j()(s).then((function(e){console.log("the data was updated for row ",n.state.numberUpdate)})).catch((function(e){console.log("error on update ",e)}))}}}]),e}(),v=n(31),y=(n(128),n(4));function N(e){var t=Object(a.useState)(e.record.firstName),n=Object(v.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(e.record.lastName),c=Object(v.a)(i,2),l=c[0],o=c[1],d=Object(a.useState)(e.record.email),h=Object(v.a)(d,2),u=h[0],b=h[1],m=Object(a.useState)(e.record.phone),j=Object(v.a)(m,2),p=j[0],g=j[1],O=Object(a.useState)(e.record.birthdate),x=Object(v.a)(O,2),N=x[0],C=x[1];return Object(a.useEffect)((function(){e.funcCallBack({firstName:s,lastname:l,email:u,phone:p,birthdate:N})})),Object(y.jsxs)("div",{className:"strtable-c",children:[Object(y.jsx)("h2",{children:"Person # ".concat(e.index+1)}),Object(y.jsxs)("div",{className:"input-div1",children:[Object(y.jsxs)("label",{className:"label1",htmlFor:"firstname{index}",children:["Vorname ",Object(y.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(y.jsx)("input",{type:"text",name:"firstname{index}",id:"firstname{index}",className:"input1",value:s,onChange:function(e){return r(e.target.value)},required:!0})]}),Object(y.jsxs)("div",{className:"input-div2",children:[Object(y.jsxs)("label",{className:"label2",htmlFor:"lastname1",children:["Name ",Object(y.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(y.jsx)("input",{type:"text",name:"lastname{index}",id:"lastname{index}",className:"input1",value:l,onChange:function(e){return o(e.target.value)},required:!0})]}),Object(y.jsxs)("div",{className:"input-div3",children:[Object(y.jsxs)("label",{className:"label3",htmlFor:"email1",children:["Email ",Object(y.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(y.jsx)("input",{type:"text",name:"email{index}",id:"email{index}",className:"input1",value:u,onChange:function(e){return b(e.target.value)},required:!0})]}),Object(y.jsxs)("div",{className:"input-div4",children:[Object(y.jsxs)("label",{className:"label4",htmlFor:"phone{index}",children:["Telefon",Object(y.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(y.jsx)("input",{type:"text",name:"phone{index}",id:"phone{index}",className:"input1",value:p,onChange:function(e){return g(e.target.value)},required:!0})]}),Object(y.jsxs)("div",{className:"input-div5",children:[Object(y.jsxs)("label",{className:"label5",htmlFor:"birthdate{index}",children:["Geburtsdatum",Object(y.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(y.jsx)(f.a,{name:"birthdate{index}",id:"birthdate{index}",selected:N,onChange:function(e){return C(e)},required:!0,dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(y.jsx)("button",{onClick:e.deleteRecord,children:"Delete"})]})}n(189);var C=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var a;Object(i.a)(this,n),a=t.call(this,e);var s=new URLSearchParams(e.location.search),r=s.get("isUpdate"),c=s.get("cntPersons");if(r){a.state={records:[],googleTab:[],isTableFilled:!1,isUpdate:!0,maxCountOfPersons:50,regButton:!1,regButtonCaption:"\xc4ndern",actualDate:new Date(s.get("date")+"T00:00:00Z"),numberUpdate:s.get("number")};for(var l=0;l<c-1;l++)(new O).setRecord(s.get("firstname"+l+1),s.get("lastname"+l+1),s.get("phone"+l+1),s.get("email"+l+1),s.get("birhtday"+l+1)),a.state.records.push(O)}else a.state={actualPersonNumber:1,persons:[],records:[new O],redirect:!1,googleTab:[],isTableFilled:!1,isUpdate:!1,actualDate:new Date,maxCountOfPersons:50,regButton:!1,regButtonCaption:"Anmelden"};return a.changeOfPersons=a.changeOfPersons.bind(Object(h.a)(a)),a.createUpdateStr=a.createUpdateStr.bind(Object(h.a)(a)),a.presetRegistryButton=a.presetRegistryButton.bind(Object(h.a)(a)),a.handleChangeDatePicker=a.handleChangeDatePicker.bind(Object(h.a)(a)),a.handleChangeFirstName=a.handleChangeFirstName.bind(Object(h.a)(a)),a.handleChangeLastName=a.handleChangeLastName.bind(Object(h.a)(a)),a.handleChangeEmail=a.handleChangeEmail.bind(Object(h.a)(a)),a.handleChangePhone=a.handleChangePhone.bind(Object(h.a)(a)),a.submitHandler=a.submitHandler.bind(Object(h.a)(a)),a.submitHandlerUpdate=a.handleChangePhone.bind(Object(h.a)(a)),a.submitHandlerAdd=a.submitHandlerAdd.bind(Object(h.a)(a)),a.getTdsOfTr=a.getTdsOfTr.bind(Object(h.a)(a)),a.getFirstDataFromTable=a.getFirstDataFromTable.bind(Object(h.a)(a)),a.tableChangeServiceView=new x,a}return Object(c.a)(n,[{key:"changeOfPersons",value:function(e){}},{key:"presetRegistryButton",value:function(){!this.state.isUpdate&&this.state.googleTab.length<this.state.maxCountOfPersons&&(this.state.regButton=!1)}},{key:"handleChangeDatePicker",value:function(e){this.state.actualDate=e}},{key:"getTdsOfTr",value:function(e){var t=e.attributes;for(var n in t)if(t[n],null!=e.childNodes[1]&&null!=e.childNodes[2].childNodes[0]&&null!=e.childNodes[2].childNodes[0].rawText&&null!=e.childNodes[2]&&null!=e.childNodes[3].childNodes[0]&&null!=e.childNodes[3].childNodes[0].rawText){var a=[{number:e.childNodes[1].childNodes[0].rawText,firstname:e.childNodes[2].childNodes[0].rawText},{lastname:e.childNodes[3].childNodes[0].rawText}];return void this.state.googleTab.push(a)}}},{key:"getFirstDataFromTable",value:function(){var e=this;j.a.get("https://docs.google.com/spreadsheets/d/14z1wb8Ei0-6rwiS6qUIvz8BJVEWhK0IMIOJnvCvkz94/edit#gid=0").then((function(t){var n=t.data,a=b.a.parse(n).querySelector("table");if(null!=a){var s=a.querySelector("tbody");null!=s&&null!=s.childNodes&&s.childNodes.forEach(e.getTdsOfTr)}}))}},{key:"handleChangeFirstName",value:function(e){this.setState({firstname:e.target.value})}},{key:"handleChangeLastName",value:function(e){this.setState({lastname:e.target.value})}},{key:"handleChangeEmail",value:function(e){this.setState({email:e.target.value})}},{key:"handleChangePhone",value:function(e){this.setState({phone:e.target.value})}},{key:"submitHandler",value:function(e){e.preventDefault(),this.state.isUpdate?this.submitHandlerUpdate():this.submitHandlerAdd()}},{key:"createUpdateStr",value:function(e){var t,n=this,a=e+" beim Liturgie in russischen Orthodoxkirche Stuttgart am , "+this.state.actualDate+' mit folgenden Link k\xf6nnen Sie den Termin stornieren <a href="http://localhost:3000/delAppointment?number='+this.state.records[0].number+'">Termin stornieren </a>, mit folgenden Link k\xf6nnen Sie den Termin \xe4ndern <a href="http://localhost:3000/updateAppointment?isUpdate=true',s=0;return this.state.records.forEach((function(e){n.tableChangeServiceView.updateRecord(e,1),s++,t=t+"&firstname "+s+"="+e.firstname+"&lastname"+s+"="+e.lastname+"&phone"+s+"="+e.phone+"&mail"+s+"="+e.email+"birthdate"+s+"="+e.birthdate})),a+t+'">Termin \xe4ndern</a>'}},{key:"submitHandlerUpdate",value:function(){p.init("user_kKJTlTMteUmJ0TVwOLNC2");var e={from_name:"smolbars@gmail.com",to_name:this.state.email,subject:"Anmeldung auf der Liturgie in russischen Orthodoxkirche Stuttgart",html:this.createUpdateStr("Sehr geehrte Damen und Herren, Sie haben erfoglreich ge\xe4ndert")};p.send("service_1ls6zy5","template_beve9nh",e).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)})),this.setState({redirect:!0})}},{key:"submitHandlerAdd",value:function(){this.tableChangeServiceView.insertRecord(this.state.records[0],1),p.init("user_kKJTlTMteUmJ0TVwOLNC2");var e={from_name:"smolbars@gmail.com",to_name:this.state.email,subject:"Anmeldung auf der Liturgie in russischen Orthodoxkirche Stuttgart",html:this.createUpdateStr("Sehr geehrte Damen und Herren, Sie haben erfoglreich angemeldet")};p.send("service_1ls6zy5","template_beve9nh",e).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)})),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return Object(y.jsxs)("table",{children:[Object(y.jsx)("tbody",{children:this.state.googleTab.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{children:e[1].number}),Object(y.jsx)("td",{children:e[1].firstname}),Object(y.jsx)("td",{children:e[1].lastname})]},t)}))}),Object(y.jsx)("button",{onClick:this.delAppointment(),children:"Termin stornieren"})]});this.getFirstDataFromTable();var t=this.state.records.map((function(t,n){return Object(y.jsx)(N,{record:t,index:n,funcCallBack:function(t){e.state.records[n]=t},deleteRecord:function(){console.log(e.state.records);var t=Object(d.a)(e.state.records);t.splice(n,1),console.log(t),e.setState({records:t})}})}));return Object(y.jsxs)("form",{className:"regForm",onSubmit:this.submitHandler,children:[Object(y.jsxs)("div",{class:"sector",children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{children:" Termin der Lithurigie oder Dienst"}),Object(y.jsx)(f.a,{selected:this.state.actualDate,onSelect:this.handleChangeDatePicker,dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(y.jsx)("div",{children:Object(y.jsx)("label",{children:"Typ der Anbetung:"})}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"1",checked:!0}),"Morgen (um 10.00)"]}),Object(y.jsx)("br",{}),Object(y.jsxs)("label",{children:[Object(y.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"2"}),"Abend (um 18.00)"]}),Object(y.jsx)("br",{}),Object(y.jsx)("div",{children:Object(y.jsxs)("label",{children:["Anzahl der Personen: ",Object(y.jsxs)("b",{children:[" ",this.state.records.length]})]})}),Object(y.jsxs)("div",{className:"reg-email",children:[Object(y.jsxs)("label",{className:"",htmlFor:"regemail",children:["Email for registration ",Object(y.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(y.jsx)("input",{type:"text",name:"regemail",id:"regemail",className:"input1",value:this.state.regEmail,onChange:function(t){return e.setState({regEmail:t.target.value})},required:!0})]})]}),Object(y.jsx)("br",{}),t,Object(y.jsx)("button",{onClick:function(){e.setState({records:e.state.records.concat(new O)})},children:"Add 1 person"}),Object(y.jsx)("button",{type:"submit",children:this.state.regButtonCaption})]})}}]),n}(a.Component),k=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var a;Object(i.a)(this,n),(a=t.call(this,e)).delAppointment=a.delAppointment.bind(Object(h.a)(a));var s=new URLSearchParams(e.location.search).get("number");return a.delAppointment(s),a}return Object(c.a)(n,[{key:"delAppointment",value:function(e){x.delAppointment(1,e)}},{key:"render",value:function(){return Object(y.jsx)("div",{children:"Sehr geehrte Damen und Herren, den Termin war wegen Ihre Bitte gel\xf6scht!"})}}]),n}(a.Component),T=n(88),w=n(7),S=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(c.a)(n,[{key:"render",value:function(){var e="localhost"===window.location.hostname?null:"/reg_forms";return Object(y.jsx)(T.a,{basename:e,children:Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(w.a,{path:"/",exact:!0,component:C}),Object(y.jsx)(w.a,{path:"/updateAppointment",exact:!0,component:C}),Object(y.jsx)(w.a,{path:"/delAppointment",exact:!0,component:k})]})})}}]),n}(a.Component),D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,197)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};r.a.render(Object(y.jsx)(S,{}),document.getElementById("root")),D()},63:function(e,t,n){},95:function(e,t,n){}},[[192,1,2]]]);
//# sourceMappingURL=main.7b338469.chunk.js.map