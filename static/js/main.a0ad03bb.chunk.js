(this.webpackJsonpreg_form=this.webpackJsonpreg_form||[]).push([[0],{103:function(e,t,a){},104:function(e,t,a){},139:function(e,t,a){},16:function(e){e.exports=JSON.parse('{"emailjs":{"service_id":"service_ekyvguk","user_id":"user_xlCrMdFfdIceV8ODHixvy","templateAdd_id":"template_9ymcj28","templateUpdate_id":"template_ocwll5c","from_name":"smolbars@gmail.com"},"site":{"host":"http://localhost:3000"},"sheet":"https://sheet.best/api/sheets/9789324f-9b9f-40c2-85d2-30e3de0fa441"}')},17:function(e){e.exports=JSON.parse('{"name":{"de":"Name","ru":"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"},"first name":{"de":"Vorname","ru":"\u0418\u043c\u044f"},"delete":{"de":"l\xf6schen","ru":"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"},"add 1 persone":{"de":"Eine Persone hinzuf\xfcgen","ru":"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c 1 \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430"},"Registration":{"de":"Anmelden","ru":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"},"Phone":{"de":"Telefon","ru":"\u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430"},"Email":{"de":"Email","ru":"\u044d\u043b\u0435\u043a\u0442\u0440\u043e\u043d\u043d\u0430\u044f \u043f\u043e\u0447\u0442\u0430"},"Date of birth":{"de":"Geburtsdatum","ru":"\u0414\u0430\u0442\u0430 \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f"},"Date":{"de":"Datum","ru":"\u0414\u0430\u0442\u0430"},"Add":{"de":"Hinzuf\xfcgen","ru":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"},"Cancel":{"de":"Stornieren","ru":"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"},"Update":{"de":"\xc4ndern","ru":"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"},"Type of pray":{"de":"Typ der Anbetung","ru":"\u0422\u0438\u043f \u043c\u043e\u043b\u0438\u0442\u0432\u044b"},"morning":{"de":"Morgen","ru":"\u0437\u0430\u0443\u0442\u0440\u0435\u043d\u043d\u044f"},"evening":{"de":"Abend","ru":"\u0432\u0435\u0447\u0435\u0440\u043d\u044f"},"number of persons":{"de":"Anzahl der Personen","ru":"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a"},"person":{"de":"Person","ru":"\u0447\u0435\u043b\u043e\u0432\u0435\u043a"},"add one person":{"de":"Einen Person hinzuf\xfcgen","ru":"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0435\u043b\u043e\u0432\u0435\u043a\u0430"},"Appointment of liturgy or service":{"de":"Termin der Lithurigie oder Dienst","ru":"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0430 \u0441\u043b\u0443\u0436\u0431\u0443 \u0438\u043b\u0438 \u043b\u0438\u0442\u0443\u0440\u0433\u0438\u044e"}}')},199:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a(37),r=a.n(s),i=(a(103),a(104),a(96)),c=a(28),l=a(29),d=a(34),o=a(97),u=a(95),h=(a(105),a(41)),m=a.n(h),b=a(42),j=a(46),p=a.n(j);a(136),a(137);function f(){return"".concat(Math.floor(1e4*Math.random()),"-").concat(Date.now(),"-").concat(Math.floor(1e4*Math.random()))}function O(e){return new Date(Number(e.substr(0,4)),Number(e.substr(5,2))-1,e.substr(8,2))}var x=function(){function e(t){Object(c.a)(this,e),t?(this.firstname=t.firstname,this.lastname=t.lastname,this.email=t.email,this.phone=t.phone,this.birthdate=O(t.birthDate),this.isVisible="???",this.id=t.idRow):(this.firstname="",this.lastname="",this.email="",this.phone="",this.birthdate="",this.isVisible="",this.id=f())}return Object(l.a)(e,[{key:"createRecord",value:function(e,t,a,n,s,r){return this.firstname=e,this.lastname=t,this.email=a,this.phone=n,this.birthdate=s,this.visible=r,this.id=f(),this}}]),e}(),g=a(43),v=a.n(g),y=a(65),w=a(66),D=a.n(w),N=a(16),S=function(){function e(){Object(c.a)(this,e),this.url=N.sheet}return Object(l.a)(e,[{key:"getRecords",value:function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(this.url,"/idOrder/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertRecord",value:function(e,t,a,n,s,r,i){switch(t){case 1:var c={method:"POST",headers:{"content-type":"application/json"},data:[{number:a,firstname:e.firstname,lastname:e.lastname,phone:e.phone,email:e.email,"birt\u0440Date":D()(e.birthdate,"yyyy-mm-dd"),idRow:e.id,idOrder:n,emailOwner:s,actualDate:D()(r,"yyyy-mm-dd"),actualTime:i}],url:this.url};m()(c).then((function(e){console.log("the data was added in the table ",e.data)})).catch((function(e){console.log("no data sorry ",e)}))}}},{key:"deleteRecord",value:function(){var e=Object(y.a)(v.a.mark((function e(t,a){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next=1===e.t0?3:6;break;case 3:return e.next=5,m.a.delete("".concat(this.url,"/idOrder/").concat(t));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),k=a(23),C=(a(139),a(17)),T=a(211),_=a(3);function R(e){var t=Object(n.useState)(e.record.firstname),a=Object(k.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(e.record.lastname),c=Object(k.a)(i,2),l=c[0],d=c[1],o=Object(n.useState)(e.record.email),u=Object(k.a)(o,2),h=u[0],m=u[1],b=Object(n.useState)(e.record.phone),j=Object(k.a)(b,2),f=j[0],O=j[1],x=Object(n.useState)(e.record.birthdate),g=Object(k.a)(x,2),v=g[0],y=g[1];return Object(n.useEffect)((function(){e.funcCallBack({firstname:s,lastname:l,email:h,phone:f,birthdate:v,isVisible:e.record.isVisible,id:e.record.id})})),Object(_.jsx)(T.a,{children:Object(_.jsxs)("div",{className:"strtable-c",children:[Object(_.jsxs)("div",{className:"fields",children:[Object(_.jsxs)("div",{className:"input",children:[Object(_.jsxs)("label",{className:"label1",htmlFor:"firstname{index}",children:[C["first name"][e.lang]," ",Object(_.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(_.jsx)("input",{type:"text",name:"firstname{index}",id:"firstname{index}",className:"input1",value:s,onChange:function(e){return r(e.target.value)},required:!0})]}),Object(_.jsxs)("div",{className:"input",children:[Object(_.jsxs)("label",{className:"label2",htmlFor:"lastname1",children:[C.name[e.lang],Object(_.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(_.jsx)("input",{type:"text",name:"lastname{index}",id:"lastname{index}",className:"input1",value:l,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(_.jsxs)("div",{className:"input",children:[Object(_.jsxs)("label",{className:"label3",htmlFor:"email1",children:[C.Email[e.lang]," ",Object(_.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(_.jsx)("input",{type:"email",name:"email{index}",id:"email{index}",className:"input1",value:h,onChange:function(e){return m(e.target.value)},required:!0})]}),Object(_.jsxs)("div",{className:"input",children:[Object(_.jsxs)("label",{className:"label4",htmlFor:"phone{index}",children:[C.Phone[e.lang],Object(_.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(_.jsx)("input",{type:"text",name:"phone{index}",id:"phone{index}",className:"input1",value:f,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(_.jsxs)("div",{className:"input",children:[Object(_.jsxs)("label",{className:"label5",htmlFor:"birthdate{index}",children:[C["Date of birth"][e.lang],Object(_.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(_.jsx)(p.a,{name:"birthdate{index}",id:"birthdate{index}",selected:v,onChange:function(e){return y(e)},required:!0,dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(_.jsx)("div",{className:"title"})]}),Object(_.jsxs)("div",{className:"plus-minus",children:[Object(_.jsx)("button",{className:"plus",onClick:e.addRecord,children:"+"}),Object(_.jsx)("button",{className:"minus",onClick:e.deleteRecord,disabled:1===e.count,children:"-"})]})]})})}a(199);var M=a(208),P=a(209),E=a(210),B=a(212),F=function(e){Object(o.a)(a,e);var t=Object(u.a)(a);function a(e){var n;Object(c.a)(this,a),(n=t.call(this,e)).propsID=e.id;var s="ru-RU"===window.navigator.language?"ru":"de";return n.propsID?n.state={idOrder:e.id,records:[],googleTab:[],isTableFilled:!1,isUpdate:!0,maxCountOfPersons:50,regButton:!1,regButtonCaption:"\xc4ndern"}:n.state={actualPersonNumber:1,persons:[],records:[new x],redirect:!1,googleTab:[],isTableFilled:!1,isUpdate:!1,actualDate:new Date,actualTime:"10-00",maxCountOfPersons:50,regButton:!1,regButtonCaption:"Anmelden",idOrder:f(),lang:s},n.changeOfPersons=n.changeOfPersons.bind(Object(d.a)(n)),n.presetRegistryButton=n.presetRegistryButton.bind(Object(d.a)(n)),n.submitHandler=n.submitHandler.bind(Object(d.a)(n)),n.tableChangeServiceView=new S,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.id&&(new S).getRecords(this.props.id).then((function(t){var a=t.data.map((function(e){return new x(e)}));e.setState({records:a,regEmail:t.data[0].emailOwner,idOrder:t.data[0].idOrder,actualDate:O(t.data[0].actualDate),actualTime:t.data[0].actualTime})})).catch((function(e){return console.error(e)}))}},{key:"componentDidUpdate",value:function(){console.log(this.state)}},{key:"changeOfPersons",value:function(e){}},{key:"presetRegistryButton",value:function(){!this.state.isUpdate&&this.state.googleTab.length<this.state.maxCountOfPersons&&(this.state.regButton=!1)}},{key:"submitHandler",value:function(e){e.preventDefault(),this.propsID?this.submitHandlerUpdate():this.submitHandlerAdd()}},{key:"submitHandlerUpdate",value:function(){var e=this;this.tableChangeServiceView.deleteRecord(this.state.idOrder,1).then((function(t){return e.state.records.forEach((function(t,a){return e.tableChangeServiceView.insertRecord(t,1,a+1,e.state.idOrder,e.state.regEmail,e.state.actualDate,e.state.actualTime)}))})),this.state.records.forEach((function(e,t){b.init(N.emailjs.user_id);var a={from_name:N.emailjs.from_name,to_name:e.email};b.send(N.emailjs.service_id,N.emailjs.templateUpdate_id,a).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)}))})),this.setState({redirect:!0})}},{key:"submitHandlerAdd",value:function(){var e=this;this.state.records.forEach((function(t,a){return e.tableChangeServiceView.insertRecord(t,1,a+1,e.state.idOrder,e.state.regEmail,e.state.actualDate,e.state.actualTime)})),this.state.records.forEach((function(t,a){b.init(N.emailjs.user_id);var n={from_name:N.emailjs.from_name,to_name:t.email,link_delete:"".concat(N.site.host,"#/delete/").concat(e.state.idOrder),link_update:"".concat(N.site.host,"#/update/").concat(e.state.idOrder)};b.send(N.emailjs.service_id,N.emailjs.templateAdd_id,n).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)}))})),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return Object(_.jsx)("div",{children:"Sehr geehrte Damen und Herren,\nIhre Termin beim Russischen Orthodoxische Kirche auf ".concat(this.state.actualDate," um ").concat(this.state.actualTime," hatte ausgemacht, wenn w\xfcnschen Sie etwas \xe4ndern oder stornieren, dann schauen Sie bitte Ihre Mailboxes")});var t=this.state.records.map((function(t,a){return Object(_.jsx)(R,{lang:e.state.lang,record:t,index:a,count:e.state.records.length,funcCallBack:function(t){e.state.records[a]=t},addRecord:function(){return e.setState({records:e.state.records.concat(new x)})},deleteRecord:function(){console.log(e.state.records);var t=Object(i.a)(e.state.records);t.splice(a,1),console.log(t),e.setState({records:t})}})}));return Object(_.jsxs)(M.a,{children:[Object(_.jsx)(P.a,{children:Object(_.jsx)(E.a,{children:Object(_.jsx)(T.a,{children:Object(_.jsx)(T.a.Body,{children:Object(_.jsxs)("form",{className:"regform",onSubmit:this.submitHandler,children:[Object(_.jsxs)("div",{class:"sector",children:[Object(_.jsxs)("div",{className:"part1",children:[Object(_.jsxs)("div",{children:[Object(_.jsxs)("label",{children:[" ",C["Appointment of liturgy or service"][this.state.lang]]}),Object(_.jsx)(p.a,{selected:this.state.actualDate,onSelect:function(t){return e.setState({actualDate:t})},dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(_.jsx)("div",{children:Object(_.jsx)("label",{children:C["Type of pray"][this.state.lang]})}),Object(_.jsxs)("label",{children:[Object(_.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"1",onChange:function(){return e.setState({actualTime:"10-00"})},checked:"10-00"===this.state.actualTime}),C.morning[this.state.lang]]}),Object(_.jsxs)("label",{children:[Object(_.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"2",onChange:function(){return e.setState({actualTime:"18-00"})},checked:"18-00"===this.state.actualTime}),C.evening[this.state.lang]]}),Object(_.jsx)("div",{children:Object(_.jsxs)("label",{children:[C["number of persons"][this.state.lang],": ",Object(_.jsxs)("b",{children:[" ",this.state.records.length]})]})})]}),Object(_.jsxs)("div",{className:"change-langauge",children:[Object(_.jsx)("label",{for:"langid",children:"Sprache/\u042f\u0437\u044b\u043a:"}),Object(_.jsxs)("select",{onChange:function(t){return e.setState({lang:t.target.value})},children:[Object(_.jsx)("option",{value:"ru",selected:"ru"===this.state.lang,children:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439"}),Object(_.jsx)("option",{value:"de",selected:"de"===this.state.lang,children:"Deutsch"})]})]})]}),t,Object(_.jsx)(M.a,{className:"text-center",children:Object(_.jsx)(B.a,{type:"submit",className:"text-center",children:C.Registration[this.state.lang]})})]})})})})})," "]})}}]),a}(n.Component),A=a(6);function H(){var e=Object(A.e)().hash.replace("#/update/","");return Object(_.jsx)(F,{id:e})}var q=a(44);function U(e){var t=Object(n.useState)(!1),a=Object(k.a)(t,2),s=a[0],r=a[1],i=Object(A.e)().hash.replace("#/delete/","");return Object(n.useEffect)((function(){(new S).deleteRecord(i,1).then(r(!0))}),[]),s?Object(_.jsx)("div",{children:"Sehr geehrte Damen und Herren, den Termin war wegen Ihre Bitte gel\xf6scht!"}):Object(_.jsx)("div",{children:"........."})}a(202);var V=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(q.b,{basename:"/reg_form",children:Object(_.jsxs)(A.b,{children:[Object(_.jsx)(q.a,{path:"/",exact:!0,children:Object(_.jsx)(F,{})}),Object(_.jsx)(q.a,{path:"/update/:id",exact:!0,children:Object(_.jsx)(H,{})}),Object(_.jsx)(q.a,{path:"/delete/:id",exact:!0,children:Object(_.jsx)(U,{})})]})})})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,213)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};r.a.render(Object(_.jsx)(V,{}),document.getElementById("root")),I()}},[[203,1,2]]]);
//# sourceMappingURL=main.a0ad03bb.chunk.js.map