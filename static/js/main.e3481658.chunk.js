(this.webpackJsonpreg_form=this.webpackJsonpreg_form||[]).push([[0],{12:function(e){e.exports=JSON.parse('{"emailjs":{"service_id":"service_ekyvguk","user_id":"user_xlCrMdFfdIceV8ODHixvy","templateAdd_id":"template_9ymcj28","templateUpdate_id":"template_ocwll5c","from_name":"smolbars@gmail.com"},"site":{"host":"http://localhost:3000"},"sheet":"https://sheet.best/api/sheets/9789324f-9b9f-40c2-85d2-30e3de0fa441"}')},133:function(e,t,a){},194:function(e,t,a){},197:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(32),r=a.n(s),i=(a(97),a(18)),c=a(19),o=a(48),d=a(47),l=(a(98),a(92)),u=a(29),h=(a(99),a(36)),b=a.n(h),m=a(37),j=a(41),p=a.n(j);a(130),a(131);function O(){return"".concat(Math.floor(1e4*Math.random()),"-").concat(Date.now(),"-").concat(Math.floor(1e4*Math.random()))}function f(e){return new Date(Number(e.substr(0,4)),Number(e.substr(5,2))-1,e.substr(8,2))}var x=function(){function e(t){Object(i.a)(this,e),t?(this.firstname=t.firstname,this.lastname=t.lastname,this.email=t.email,this.phone=t.phone,this.birthdate=f(t.birthDate),this.isVisible="???",this.id=t.idRow):(this.firstname="",this.lastname="",this.email="",this.phone="",this.birthdate="",this.isVisible="",this.id=O())}return Object(c.a)(e,[{key:"createRecord",value:function(e,t,a,n,s,r){return this.firstname=e,this.lastname=t,this.email=a,this.phone=n,this.birthdate=s,this.visible=r,this.id=O(),this}}]),e}(),v=a(38),g=a.n(v),y=a(62),w=a(63),k=a.n(w),C=a(12),N=function(){function e(){Object(i.a)(this,e),this.url=C.sheet}return Object(c.a)(e,[{key:"getRecords",value:function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get("".concat(this.url,"/idOrder/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"insertRecord",value:function(e,t,a,n,s,r,i){switch(t){case 1:var c={method:"POST",headers:{"content-type":"application/json"},data:[{number:a,firstname:e.firstname,lastname:e.lastname,phone:e.phone,email:e.email,"birt\u0440Date":k()(e.birthdate,"yyyy-mm-dd"),idRow:e.id,idOrder:n,emailOwner:s,actualDate:k()(r,"yyyy-mm-dd"),actualTime:i}],url:this.url};b()(c).then((function(e){console.log("the data was added in the table ",e.data)})).catch((function(e){console.log("no data sorry ",e)}))}}},{key:"deleteRecord",value:function(){var e=Object(y.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=a,e.next=1===e.t0?3:6;break;case 3:return e.next=5,b.a.delete("".concat(this.url,"/idOrder/").concat(t));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),e}(),S=a(20),D=(a(133),a(4));function _(e){var t=Object(n.useState)(e.record.firstname),a=Object(S.a)(t,2),s=a[0],r=a[1],i=Object(n.useState)(e.record.lastname),c=Object(S.a)(i,2),o=c[0],d=c[1],l=Object(n.useState)(e.record.email),u=Object(S.a)(l,2),h=u[0],b=u[1],m=Object(n.useState)(e.record.phone),j=Object(S.a)(m,2),O=j[0],f=j[1],x=Object(n.useState)(e.record.birthdate),v=Object(S.a)(x,2),g=v[0],y=v[1];return Object(n.useEffect)((function(){e.funcCallBack({firstname:s,lastname:o,email:h,phone:O,birthdate:g,isVisible:e.record.isVisible,id:e.record.id})})),Object(D.jsxs)("div",{className:"strtable-c",children:[Object(D.jsxs)("div",{className:"fields",children:[Object(D.jsxs)("div",{className:"input-div1",children:[Object(D.jsxs)("label",{className:"label1",htmlFor:"firstname{index}",children:["Vorname ",Object(D.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(D.jsx)("input",{type:"text",name:"firstname{index}",id:"firstname{index}",className:"input1",value:s,onChange:function(e){return r(e.target.value)},required:!0})]}),Object(D.jsxs)("div",{className:"input-div2",children:[Object(D.jsxs)("label",{className:"label2",htmlFor:"lastname1",children:["Name ",Object(D.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(D.jsx)("input",{type:"text",name:"lastname{index}",id:"lastname{index}",className:"input1",value:o,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(D.jsxs)("div",{className:"input-div3",children:[Object(D.jsxs)("label",{className:"label3",htmlFor:"email1",children:["Email ",Object(D.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(D.jsx)("input",{type:"email",name:"email{index}",id:"email{index}",className:"input1",value:h,onChange:function(e){return b(e.target.value)},required:!0})]}),Object(D.jsxs)("div",{className:"input-div4",children:[Object(D.jsxs)("label",{className:"label4",htmlFor:"phone{index}",children:["Telefon",Object(D.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(D.jsx)("input",{type:"text",name:"phone{index}",id:"phone{index}",className:"input1",value:O,onChange:function(e){return f(e.target.value)},required:!0})]}),Object(D.jsxs)("div",{className:"input-div5",children:[Object(D.jsxs)("label",{className:"label5",htmlFor:"birthdate{index}",children:["Geburtsdatum",Object(D.jsx)("span",{class:"reqsymbol",children:"*"})]}),Object(D.jsx)(p.a,{name:"birthdate{index}",id:"birthdate{index}",selected:g,onChange:function(e){return y(e)},required:!0,dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(D.jsx)("div",{className:"title"})]}),Object(D.jsxs)("div",{className:"plus-minus",children:[Object(D.jsx)("button",{className:"plus",onClick:e.addRecord,children:"+"}),Object(D.jsx)("button",{className:"minus",onClick:e.deleteRecord,disabled:1===e.count,children:"-"})]})]})}a(194);var T=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(i.a)(this,a),(n=t.call(this,e)).propsID=e.id;e.update;return n.propsID?n.state={idOrder:e.id,records:[],googleTab:[],isTableFilled:!1,isUpdate:!0,maxCountOfPersons:50,regButton:!1,regButtonCaption:"\xc4ndern"}:n.state={actualPersonNumber:1,persons:[],records:[new x],redirect:!1,googleTab:[],isTableFilled:!1,isUpdate:!1,actualDate:new Date,actualTime:"10-00",maxCountOfPersons:50,regButton:!1,regButtonCaption:"Anmelden",idOrder:O()},n.changeOfPersons=n.changeOfPersons.bind(Object(u.a)(n)),n.presetRegistryButton=n.presetRegistryButton.bind(Object(u.a)(n)),n.submitHandler=n.submitHandler.bind(Object(u.a)(n)),n.tableChangeServiceView=new N,n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.id&&(new N).getRecords(this.props.id).then((function(t){var a=t.data.map((function(e){return new x(e)}));e.setState({records:a,regEmail:t.data[0].emailOwner,idOrder:t.data[0].idOrder,actualDate:f(t.data[0].actualDate),actualTime:t.data[0].actualTime})})).catch((function(e){return console.error(e)}))}},{key:"changeOfPersons",value:function(e){}},{key:"presetRegistryButton",value:function(){!this.state.isUpdate&&this.state.googleTab.length<this.state.maxCountOfPersons&&(this.state.regButton=!1)}},{key:"submitHandler",value:function(e){e.preventDefault(),this.propsID?this.submitHandlerUpdate():this.submitHandlerAdd()}},{key:"submitHandlerUpdate",value:function(){var e=this;this.tableChangeServiceView.deleteRecord(this.state.idOrder,1).then((function(t){return e.state.records.forEach((function(t,a){return e.tableChangeServiceView.insertRecord(t,1,a+1,e.state.idOrder,e.state.regEmail,e.state.actualDate,e.state.actualTime)}))})),this.state.records.forEach((function(e,t){m.init(C.emailjs.user_id);var a={from_name:C.emailjs.from_name,to_name:e.email};m.send(C.emailjs.service_id,C.emailjs.templateUpdate_id,a).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)}))})),this.setState({redirect:!0})}},{key:"submitHandlerAdd",value:function(){var e=this;this.state.records.forEach((function(t,a){return e.tableChangeServiceView.insertRecord(t,1,a+1,e.state.idOrder,e.state.regEmail,e.state.actualDate,e.state.actualTime)})),this.state.records.forEach((function(t,a){m.init(C.emailjs.user_id);var n={from_name:C.emailjs.from_name,to_name:t.email,link_delete:"".concat(C.site.host,"#/delete/").concat(e.state.idOrder),link_update:"".concat(C.site.host,"#/update/").concat(e.state.idOrder)};m.send(C.emailjs.service_id,C.emailjs.templateAdd_id,n).then((function(e){console.log(e.status,e.text)}),(function(e){console.log(e)}))})),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this;if(this.state.redirect)return Object(D.jsx)("div",{children:"Sehr geehrte Damen und Herren,\nIhre Termin beim Russischen Orthodoxische Kirche auf ".concat(this.state.actualDate," um ").concat(this.state.actualTime," hatte ausgemacht, wenn w\xfcnschen Sie etwas \xe4ndern oder stornieren, dann schauen Sie bitte Ihre Mailboxes")});var t=this.state.records.map((function(t,a){return Object(D.jsx)(_,{record:t,index:a,count:e.state.records.length,funcCallBack:function(t){e.state.records[a]=t},addRecord:function(){return e.setState({records:e.state.records.concat(new x)})},deleteRecord:function(){console.log(e.state.records);var t=Object(l.a)(e.state.records);t.splice(a,1),console.log(t),e.setState({records:t})}})}));return Object(D.jsxs)("form",{className:"regForm",onSubmit:this.submitHandler,children:[Object(D.jsxs)("div",{class:"sector",children:[Object(D.jsxs)("div",{children:[Object(D.jsx)("label",{children:" Termin der Lithurigie oder Dienst"}),Object(D.jsx)(p.a,{selected:this.state.actualDate,onSelect:function(t){return e.setState({actualDate:t})},dateFormat:"yyyy-MM-dd",peekNextMonth:!0,showMonthDropdown:!0,showYearDropdown:!0,dropdownMode:"select",shouldCloseOnSelect:!0})]}),Object(D.jsx)("div",{children:Object(D.jsx)("label",{children:"Typ der Anbetung:"})}),Object(D.jsxs)("label",{children:[Object(D.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"1",onChange:function(){return e.setState({actualTime:"10-00"})},checked:"10-00"===this.state.actualTime}),"Morgen (um 10.00)"]}),Object(D.jsx)("br",{}),Object(D.jsxs)("label",{children:[Object(D.jsx)("input",{type:"radio",id:"prayer",name:"prayer",value:"2",onChange:function(){return e.setState({actualTime:"18-00"})},checked:"18-00"===this.state.actualTime}),"Abend (um 18.00)"]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{children:Object(D.jsxs)("label",{children:["Anzahl der Personen: ",Object(D.jsxs)("b",{children:[" ",this.state.records.length]})]})})]}),Object(D.jsx)("br",{}),t,Object(D.jsx)("button",{type:"submit",children:this.state.regButtonCaption})]})}}]),a}(n.Component),R=a(6);function M(){var e=Object(R.e)().hash.replace("#/update/","");return Object(D.jsx)(T,{id:e})}var F=a(39);function B(e){var t=Object(n.useState)(!1),a=Object(S.a)(t,2),s=a[0],r=a[1],i=Object(R.e)().hash.replace("#/delete/","");return Object(n.useEffect)((function(){(new N).deleteRecord(i,1).then(r(!0))}),[]),s?Object(D.jsx)("div",{children:"Sehr geehrte Damen und Herren, den Termin war wegen Ihre Bitte gel\xf6scht!"}):Object(D.jsx)("div",{children:"........."})}var E=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(D.jsx)("div",{className:"App",children:Object(D.jsx)(F.b,{basename:"/reg_form",children:Object(D.jsxs)(R.b,{children:[Object(D.jsx)(F.a,{path:"/",exact:!0,children:Object(D.jsx)(T,{})}),Object(D.jsx)(F.a,{path:"/update/:id",exact:!0,children:Object(D.jsx)(M,{})}),Object(D.jsx)(F.a,{path:"/delete/:id",exact:!0,children:Object(D.jsx)(B,{})})]})})})}}]),a}(n.Component),H=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,202)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;a(e),n(e),s(e),r(e),i(e)}))};r.a.render(Object(D.jsx)(E,{}),document.getElementById("root")),H()},97:function(e,t,a){},98:function(e,t,a){}},[[197,1,2]]]);
//# sourceMappingURL=main.e3481658.chunk.js.map